<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Only Girls â€” Mini plateforme</title>
  <style>
    :root{
      --pink:#ff6fb5;
      --pink-2:#ff95c8;
      --bg:#fff5fb;
      --text:#3a2b36;
      --muted:#6b5460;
      --card:#ffeef8;
    }
    *{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#fff);color:var(--text);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .app{width:100%;max-width:940px;border-radius:12px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,0.08)}

    header{display:flex;align-items:center;gap:16px;padding:18px 22px;background:linear-gradient(90deg,var(--pink),var(--pink-2));color:white}
    .logo{width:56px;height:56px;border-radius:12px;background:rgba(255,255,255,0.18);display:flex;align-items:center;justify-content:center;font-weight:700}
    .title{font-size:20px;font-weight:700}
    .subtitle{font-size:13px;opacity:.95}

    .main{display:flex;gap:18px;background:white;padding:20px}
    .sidebar{width:220px;border-right:1px solid #ffe6f3;padding-right:12px}
    .role{font-size:13px;color:var(--muted);margin-bottom:12px}
    .room{background:var(--card);padding:12px;border-radius:10px;margin-bottom:12px}
    .room h4{margin:0 0 6px 0}
    .room p{margin:0;font-size:13px;color:var(--muted)}

    .chat-wrap{flex:1;display:flex;flex-direction:column;min-height:420px}
    .messages{flex:1;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:10px;background:linear-gradient(180deg, #fff, #fffafc);border-radius:8px}
    .msg{max-width:70%;padding:10px 12px;border-radius:12px;background:white;box-shadow:0 4px 8px rgba(0,0,0,0.03)}
    .me{align-self:flex-end;background:linear-gradient(90deg,var(--pink),var(--pink-2));color:white}
    .meta{font-size:12px;color:var(--muted);margin-bottom:6px}
    .composer{display:flex;gap:8px;margin-top:12px}
    input[type=text],textarea{padding:10px;border-radius:10px;border:1px solid #ffd6ed;flex:1}
    button{background:var(--pink);border:none;color:white;padding:10px 14px;border-radius:10px;font-weight:600}

    /* modal login */
    .modal{position:fixed;inset:0;background:rgba(20,10,18,0.5);display:flex;align-items:center;justify-content:center}
    .card{width:100%;max-width:420px;background:white;padding:22px;border-radius:12px}
    .hint{font-size:13px;color:var(--muted);margin-top:8px}
    .small{font-size:12px;color:#a66a86}

    footer{padding:12px 18px;text-align:center;font-size:13px;color:var(--muted)}

    @media (max-width:740px){.main{flex-direction:column}.sidebar{width:100%;order:2}.chat-wrap{order:1}}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="logo">OG</div>
      <div>
        <div class="title">Only Girls</div>
        <div class="subtitle">"I'm just a girl" â€” espace privÃ© pour discuter</div>
      </div>
    </header>

    <div class="main">
      <aside class="sidebar">
        <div class="role">RÃ´le : <strong>Discuter</strong></div>
        <div class="room">
          <h4>Salon : only-girls</h4>
          <p>ThÃ¨me : Â« I'm just a girl Â» â€” Couleurs : pink ðŸ’–</p>
        </div>
        <div class="room">
          <h4>AccÃ¨s</h4>
          <p class="hint">Seules les amies qui ont le code peuvent entrer.</p>
        </div>
        <div class="small">NOTE : prototype cÃ´tÃ© client â€” pas sÃ©curisÃ© pour secrets importants.</div>
      </aside>

      <section class="chat-wrap">
        <div id="messages" class="messages" aria-live="polite"></div>

        <div class="composer">
          <input id="msgInput" type="text" placeholder="Ã‰cris un message...">
          <button id="sendBtn">Envoyer</button>
        </div>
      </section>
    </div>

    <footer>Only Girls â€” mini plateforme â€¢ Prototype local</footer>
  </div>

  <!-- login modal -->
  <div id="loginModal" class="modal" aria-hidden="false">
    <div class="card">
      <h3>Bienvenue â€” only-girls</h3>
      <p>Entrez votre pseudo et le code d'accÃ¨s partagÃ© avec le groupe.</p>

      <div style="margin-top:12px;display:flex;gap:8px;flex-direction:column">
        <input id="nameInput" type="text" placeholder="Ton pseudo (ex: Sofia)">
        <input id="codeInput" type="text" placeholder="Code d'accÃ¨s">
        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:6px">
          <button id="joinBtn">Rejoindre</button>
        </div>
        <div class="hint">Exemple de code (modifiable) : <strong>onlygirls</strong></div>
      </div>
    </div>
  </div>

  <script>
    /* ======= Configuration ======== */
    const ACCESS_CODE = '9haab'; // change le code ici si besoin
    /* =============================== */

    // Ã©lÃ©ments
    const loginModal = document.getElementById('loginModal');
    const joinBtn = document.getElementById('joinBtn');
    const codeInput = document.getElementById('codeInput');
    const nameInput = document.getElementById('nameInput');
    const messagesEl = document.getElementById('messages');
    const msgInput = document.getElementById('msgInput');
    const sendBtn = document.getElementById('sendBtn');

    let user = null;

    // messages stockÃ©s localement (prototype)
    function loadMessages(){
      try{
        const raw = localStorage.getItem('og_messages') || '[]';
        return JSON.parse(raw);
      }catch(e){return []}
    }
    function saveMessages(arr){localStorage.setItem('og_messages', JSON.stringify(arr))}

    function render(){
      const arr = loadMessages();
      messagesEl.innerHTML = '';
      arr.forEach(m => {
        const div = document.createElement('div');
        div.className = 'msg';
        if(m.name === user) div.classList.add('me');
        const meta = document.createElement('div'); meta.className = 'meta';
        meta.textContent = m.name + ' â€¢ ' + new Date(m.t).toLocaleString();
        const body = document.createElement('div'); body.innerHTML = m.text.replace(/\n/g,'<br>');
        div.appendChild(meta); div.appendChild(body); messagesEl.appendChild(div);
      });
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    // join
    joinBtn.addEventListener('click', ()=>{
      const code = codeInput.value.trim();
      const name = nameInput.value.trim() || 'Amie';
      if(code === ACCESS_CODE){
        user = name;
        loginModal.style.display = 'none';
        render();
        addSystemMessage(name + ' a rejoint le salon.');
      } else {
        alert('Code incorrect â€” demande le code aux admin du groupe');
      }
    });

    // send
    sendBtn.addEventListener('click', sendMessage);
    msgInput.addEventListener('keydown', (e)=>{if(e.key === 'Enter'){e.preventDefault();sendMessage()}})

    function sendMessage(){
      if(!user) return alert('Tu dois d\u00e9j\u00e0 rejoindre le salon.');
      const txt = msgInput.value.trim();
      if(!txt) return;
      const arr = loadMessages();
      arr.push({name:user,text:escapeHtml(txt),t:Date.now()});
      saveMessages(arr);
      msgInput.value = '';
      render();
    }

    function addSystemMessage(text){
      const arr = loadMessages(); arr.push({name:'â€”',text:escapeHtml(text),t:Date.now()}); saveMessages(arr); render();
    }

    function escapeHtml(unsafe) {
      return unsafe
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/\"/g, "&quot;")
        .replace(/\'/g, "&#039;");
    }

    // first render if already joined in this tab
    (function tryAutoJoin(){
      // keep it simple: if name in sessionStorage, auto-use
      const savedName = sessionStorage.getItem('og_name');
      if(savedName){ nameInput.value = savedName }
      joinBtn.addEventListener('click', ()=>{ if(nameInput.value) sessionStorage.setItem('og_name', nameInput.value) })
    })();

  </script>
</body>
</html>

